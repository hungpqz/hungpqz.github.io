var __reflect=this&&this.__reflect||function(t,e,n){t.__class__=e,n?n.push(e):n=[e],t.__types__=t.__types__?n.concat(t.__types__):n},__extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);n.prototype=e.prototype,t.prototype=new n},__awaiter=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(s,a){function o(t){try{h(i.next(t))}catch(e){a(e)}}function r(t){try{h(i["throw"](t))}catch(e){a(e)}}function h(t){t.done?s(t.value):new n(function(e){e(t.value)}).then(o,r)}h((i=i.apply(t,e||[])).next())})},__generator=this&&this.__generator||function(t,e){function n(t){return function(e){return i([t,e])}}function i(n){if(s)throw new TypeError("Generator is already executing.");for(;h;)try{if(s=1,a&&(o=a[2&n[0]?"return":n[0]?"throw":"next"])&&!(o=o.call(a,n[1])).done)return o;switch(a=0,o&&(n=[0,o.value]),n[0]){case 0:case 1:o=n;break;case 4:return h.label++,{value:n[1],done:!1};case 5:h.label++,a=n[1],n=[0];continue;case 7:n=h.ops.pop(),h.trys.pop();continue;default:if(o=h.trys,!(o=o.length>0&&o[o.length-1])&&(6===n[0]||2===n[0])){h=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){h.label=n[1];break}if(6===n[0]&&h.label<o[1]){h.label=o[1],o=n;break}if(o&&h.label<o[2]){h.label=o[2],h.ops.push(n);break}o[2]&&h.ops.pop(),h.trys.pop();continue}n=e.call(t,h)}catch(i){n=[6,i],a=0}finally{s=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var s,a,o,r,h={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:n(0),"throw":n(1),"return":n(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r},LoadingUI=function(t){function e(){var e=t.call(this)||this;return e.createView(),e}return __extends(e,t),e.prototype.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=300,this.textField.width=480,this.textField.height=100,this.textField.textAlign="center"},e.prototype.onProgress=function(t,e){this.textField.text="Đang vận chuyển..."+t+"/"+e},e}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI",["RES.PromiseTaskReporter"]);var Main=function(t){function e(){var e=t.call(this)||this;return e.addEventListener(egret.Event.ADDED_TO_STAGE,e.onAddToStage,e),e}return __extends(e,t),e.prototype.onAddToStage=function(t){egret.lifecycle.addLifecycleListener(function(t){t.onUpdate=function(){}}),egret.lifecycle.onPause=function(){egret.ticker.pause()},egret.lifecycle.onResume=function(){egret.ticker.resume()},this.runGame()["catch"](function(t){console.log(t)})},e.prototype.runGame=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return[4,this.loadResource()];case 1:return t.sent(),this.bgSound=new SoundBase("bg_mp3"),this.click_sound=new SoundBase("click_mp3"),this.bgSound.setLoop(0),this.createGameScene(),[2]}})})},e.prototype.loadResource=function(){return __awaiter(this,void 0,void 0,function(){var t,e;return __generator(this,function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),t=new LoadingUI,this.stage.addChild(t),[4,RES.loadConfig("resource/default.res.json","resource/")];case 1:return n.sent(),[4,RES.loadGroup("preload",0,t)];case 2:return n.sent(),this.stage.removeChild(t),[3,4];case 3:return e=n.sent(),console.error(e),[3,4];case 4:return[2]}})})},e.prototype.createGameScene=function(){this.score=0,this.B2Scene(),1==this.bgSound.getStatus()&&this.bgSound.stop()},e.prototype.B2Scene=function(){var t=this,e=this.createBitmapByName("b2_jpg");this.addChild(e),e.touchEnabled=!0,e.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){t.removeChild(e),t.bgSound.play(),t.B3Scene()},this)},e.prototype.B3Scene=function(){var t=this,e=this.createBitmapByName("b3_jpg");this.addChild(e),this.fullname=new egret.TextField,this.fullname.type=egret.TextFieldType.INPUT,this.fullname.text="Họ và Tên",this.fullname.x=115,this.fullname.y=575,this.fullname.width=460,this.addChild(this.fullname),this.fullname.addEventListener(egret.FocusEvent.FOCUS_IN,function(t){("Họ và Tên"==this.fullname.text||"Vui lòng nhập Họ và Tên"==this.fullname.text)&&(this.fullname.text="")},this),this.fullname.addEventListener(egret.FocusEvent.FOCUS_OUT,function(t){""==this.fullname.text&&(this.fullname.text="Họ và Tên")},this);var n=this.createBitmapByName("login_btn_jpg");n.x=156,n.y=676,n.touchEnabled=!0,this.addChild(n),n.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){t.click_sound.play(),"Họ và Tên"==t.fullname.text||"Vui lòng nhập Họ và Tên"==t.fullname.text?(t.fullname.text="Vui lòng nhập Họ và Tên",egret.Tween.get(n).to({alpha:.4},100).to({alpha:1},100)):(n.touchEnabled=!1,egret.Tween.get(n).to({alpha:.4},100).to({alpha:1},100).wait(500).call(function(){t.removeChild(n),t.removeChild(e),t.removeChild(t.fullname),t.B4Scene()}))},this)},e.prototype.B4Scene=function(){var t=this,e=this.createBitmapByName("b4_png"),n=new egret.TextField;n.x=0,n.y=375,n.width=640,n.textAlign="center",n.size=30,n.bold=!0,n.text="Xin chào "+this.fullname.text,this.addChild(n);var i=new SoundBase("countdown_mp3");i.play();var s=this.createBitmapByName("count_down_three_png"),a=this.createBitmapByName("count_down_two_png"),o=this.createBitmapByName("count_down_one_png");o.y=a.y=s.y=this.stage.stageHeight-o.height,this.addChild(o),this.addChild(a),this.addChild(s),this.addChild(e),egret.Tween.get(e).wait(1e3).call(function(){egret.Tween.get(s).to({y:100},500).call(function(){t.removeChild(s)});var e=new SoundBase("countdown_mp3");e.play()}).wait(1e3).call(function(){egret.Tween.get(a).to({y:100},500).call(function(){t.removeChild(a)});var e=new SoundBase("countdown_mp3");e.play()}).wait(1e3).call(function(){t.B5Scene()})},e.prototype.B5Scene=function(){var t=this,e=this.createBitmapByName("b7_jpg");this.addChild(e);var n=this.createBitmapByName("cont_btn_png");n.x=168,n.y=680,n.touchEnabled=!0,this.addChild(n),n.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){n.touchEnabled=!1,t.click_sound.play(),egret.Tween.get(n).to({alpha:.4},100).to({alpha:1},100).wait(500).call(function(){t.removeChild(e),t.removeChild(n),t.B6Scene()})},this)},e.prototype.B6Scene=function(){var t=this,e=this.createBitmapByName("b8_jpg");this.addChild(e),e.touchEnabled=!0,this.click_to_continue(),e.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){var n=new SoundBase("continue_mp3");n.play(),t.removeChild(e),t.B7Scene()},this)},e.prototype.B7Scene=function(){var t=this,e=this.createBitmapByName("b9_jpg");this.addChild(e),e.touchEnabled=!0,this.click_to_continue(),e.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){var n=new SoundBase("continue_mp3");n.play(),t.removeChild(e),t.B8Scene()},this)},e.prototype.B8Scene=function(){var t=this,e=this.createBitmapByName("q1_ground_jpg");this.addChild(e);var n=this.createBitmapByName("q1_jpg");this.run_mask(1),this.addChild(n),n.mask=this._shape;var i=this.createBitmapByName("answer_btn_png");i.x=100,i.y=480,this.addChild(i),i.touchEnabled=!0;var s=this.createBitmapByName("answer_btn_png");s.x=100,s.y=605,this.addChild(s),s.touchEnabled=!0;var a=this.createBitmapByName("answer_btn_png");a.x=100,a.y=735,this.addChild(a),a.touchEnabled=!0,i.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){t.removeChild(n),t.removeChild(i),t.removeChild(s),t.removeChild(a),t.step_one_answer(1)},this),s.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){t.removeChild(n),t.removeChild(i),t.removeChild(s),t.removeChild(a),t.step_one_answer(2)},this),a.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){t.removeChild(n),t.removeChild(i),t.removeChild(s),t.removeChild(a),t.step_one_answer(3)},this)},e.prototype.add_next_step_button=function(){this.next_step_btn=this.createBitmapByName("cont_btn_png"),this.next_step_btn.touchEnabled=!0,this.next_step_btn.y=780,this.next_step_btn.x=(this.stage.width-this.next_step_btn.width)/2,this.addChild(this.next_step_btn)},e.prototype.step_one_answer=function(t){var e=this;console.log("Đáp án "+t);var n=this.createBitmapByName("a1_jpg");switch(this.addChild(n),t){case 3:this.lose_sound(),egret.Tween.get(n).wait(1e3).call(function(){e.result=e.createBitmapByName("r1_1_jpg"),e.addChild(e.result),e.add_next_step_button(),e.next_step_action_one(1)});break;case 2:this.lose_sound(),egret.Tween.get(n).wait(1e3).call(function(){e.result=e.createBitmapByName("r1_2_jpg"),e.addChild(e.result),e.add_next_step_button(),e.next_step_action_one(2)});break;case 1:this.win_sound(),this.score=this.score+1,egret.Tween.get(n).wait(1e3).call(function(){e.result=e.createBitmapByName("r1_jpg"),e.addChild(e.result),e.add_next_step_button(),e.next_step_action_one(3)})}},e.prototype.next_step_action_one=function(t){var e=this;this.next_step_btn.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.next_step_btn.touchEnabled=!1,e.click_sound.play(),egret.Tween.get(e.next_step_btn).to({alpha:.4},100).to({alpha:1},100).wait(500).call(function(){e.removeChild(e.result),e.removeChild(e.next_step_btn);var n="end_1_win_jpg";3!=t&&(n="end_1_lose_jpg");var i=e.createBitmapByName(n);i.touchEnabled=!0,e.addChild(i),e.click_to_continue(),i.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){var t=new SoundBase("continue_mp3");t.play(),e.removeChild(i),e.B9Scene()},e)})},this)},e.prototype.B9Scene=function(){var t=this,e=this.createBitmapByName("q2_ground_jpg");this.addChild(e);var n=this.createBitmapByName("q2_jpg");this.run_mask(2),this.addChild(n),n.mask=this._shape;var i=this.createBitmapByName("answer_btn_png");i.x=100,i.y=535,this.addChild(i),i.touchEnabled=!0;var s=this.createBitmapByName("answer_btn_png");s.x=100,s.y=680,this.addChild(s),s.touchEnabled=!0;var a=this.createBitmapByName("answer_btn_png");a.x=100,a.y=788,this.addChild(a),a.touchEnabled=!0,i.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){t.removeChild(n),t.removeChild(i),t.removeChild(s),t.removeChild(a),t.step_two_answer(1)},this),s.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){t.removeChild(n),t.removeChild(i),t.removeChild(s),t.removeChild(a),t.step_two_answer(2)},this),a.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){t.removeChild(n),t.removeChild(i),t.removeChild(s),t.removeChild(a),t.step_two_answer(3)},this)},e.prototype.step_two_answer=function(t){var e=this;console.log("Đáp án "+t);var n=this.createBitmapByName("a2_jpg");switch(this.addChild(n),t){case 1:this.lose_sound(),egret.Tween.get(n).wait(1e3).call(function(){e.result=e.createBitmapByName("r2_1_jpg"),e.addChild(e.result),e.add_next_step_button(),e.next_step_action_two(1)});break;case 2:this.win_sound(),egret.Tween.get(n).wait(1e3).call(function(){e.result=e.createBitmapByName("r2_jpg"),e.addChild(e.result),e.add_next_step_button(),e.next_step_action_two(2)});break;case 3:this.lose_sound(),this.score=this.score+1,egret.Tween.get(n).wait(1e3).call(function(){e.result=e.createBitmapByName("r2_2_jpg"),e.addChild(e.result),e.add_next_step_button(),e.next_step_action_two(3)})}},e.prototype.next_step_action_two=function(t){var e=this;this.next_step_btn.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.click_sound.play(),e.next_step_btn.touchEnabled=!1,egret.Tween.get(e.next_step_btn).to({alpha:.4},100).to({alpha:1},100).wait(500).call(function(){e.removeChild(e.result),e.removeChild(e.next_step_btn);var n="end_2_win_jpg";3!=t&&(n="end_2_lose_jpg");var i=e.createBitmapByName(n);i.touchEnabled=!0,e.addChild(i),e.click_to_continue(),i.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){var t=new SoundBase("continue_mp3");t.play(),e.removeChild(i),e.B10Scene()},e)},e)},this)},e.prototype.B10Scene=function(){var t=this,e=this.createBitmapByName("q3_ground_jpg");this.addChild(e);var n=this.createBitmapByName("q3_jpg");this.run_mask(3),this.addChild(n),n.mask=this._shape;var i=this.createBitmapByName("answer_btn_png");i.x=100,i.y=535,this.addChild(i),i.touchEnabled=!0;var s=this.createBitmapByName("answer_btn_png");s.x=100,s.y=662,this.addChild(s),s.touchEnabled=!0;var a=this.createBitmapByName("answer_btn_png");a.x=100,a.y=790,a.height=140,this.addChild(a),a.touchEnabled=!0,i.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){t.removeChild(n),t.removeChild(i),t.removeChild(s),t.removeChild(a),t.step_three_answer(1)},this),s.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){t.removeChild(n),t.removeChild(i),t.removeChild(s),t.removeChild(a),t.step_three_answer(2)},this),a.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){t.removeChild(n),t.removeChild(i),t.removeChild(s),t.removeChild(a),t.step_three_answer(3)},this)},e.prototype.step_three_answer=function(t){var e=this;console.log("Đáp án "+t);var n=this.createBitmapByName("a3_jpg");switch(this.addChild(n),t){case 1:this.lose_sound(),egret.Tween.get(n).wait(1e3).call(function(){e.result=e.createBitmapByName("r3_1_jpg"),e.addChild(e.result),e.add_next_step_button(),e.next_step_action_three(1)});break;case 2:this.lose_sound(),egret.Tween.get(n).wait(1e3).call(function(){e.result=e.createBitmapByName("r3_2_jpg"),e.addChild(e.result),e.add_next_step_button(),e.next_step_action_three(2)});break;case 3:this.win_sound(),this.score=this.score+1,egret.Tween.get(n).wait(1e3).call(function(){e.result=e.createBitmapByName("r3_jpg"),e.addChild(e.result),e.add_next_step_button(),e.next_step_action_three(3)})}},e.prototype.next_step_action_three=function(t){var e=this;this.next_step_btn.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.click_sound.play(),e.next_step_btn.touchEnabled=!1,egret.Tween.get(e.next_step_btn).to({alpha:.4},100).to({alpha:1},100).wait(500).call(function(){e.removeChild(e.result),e.removeChild(e.next_step_btn);var n="end_3_win_jpg";3!=t&&(n="end_3_lose_jpg");var i=e.createBitmapByName(n);i.touchEnabled=!0,e.addChild(i),e.click_to_continue(),i.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){var t=new SoundBase("continue_mp3");t.play(),e.removeChild(i),e.B11Scene()},e)},e)},this)},e.prototype.B11Scene=function(){var t=this,e=this.createBitmapByName("q4_ground_jpg");this.addChild(e);var n=this.createBitmapByName("q4_jpg");this.run_mask(4),this.addChild(n),n.mask=this._shape;var i=this.createBitmapByName("answer_btn_png");i.x=100,i.y=535,this.addChild(i),i.touchEnabled=!0;var s=this.createBitmapByName("answer_btn_png");s.x=100,s.y=662,this.addChild(s),s.touchEnabled=!0;var a=this.createBitmapByName("answer_btn_png");a.x=100,a.y=790,a.height=140,this.addChild(a),a.touchEnabled=!0,i.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){t.removeChild(n),t.removeChild(i),t.removeChild(s),t.removeChild(a),t.step_four_answer(1)},this),s.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){t.removeChild(n),t.removeChild(i),t.removeChild(s),t.removeChild(a),t.step_four_answer(2)},this),a.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){t.removeChild(n),t.removeChild(i),t.removeChild(s),t.removeChild(a),t.step_four_answer(3)},this)},e.prototype.step_four_answer=function(t){var e=this;console.log("Đáp án "+t);var n=this.createBitmapByName("a4_jpg");switch(this.addChild(n),t){case 1:this.lose_sound(),egret.Tween.get(n).wait(1e3).call(function(){e.result=e.createBitmapByName("r4_1_jpg"),e.addChild(e.result),e.add_next_step_button(),e.next_step_action_four(1)});break;case 2:this.lose_sound(),egret.Tween.get(n).wait(1e3).call(function(){e.result=e.createBitmapByName("r4_2_jpg"),e.addChild(e.result),e.add_next_step_button(),e.next_step_action_four(2)});break;case 3:this.win_sound(),this.score=this.score+1,egret.Tween.get(n).wait(1e3).call(function(){e.result=e.createBitmapByName("r4_jpg"),e.addChild(e.result),e.add_next_step_button(),e.next_step_action_four(3)})}},e.prototype.next_step_action_four=function(t){var e=this;this.next_step_btn.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.click_sound.play(),e.next_step_btn.touchEnabled=!1,egret.Tween.get(e.next_step_btn).to({alpha:.4},100).to({alpha:1},100).wait(500).call(function(){e.removeChild(e.result),e.removeChild(e.next_step_btn);var n="end_4_win_jpg";3!=t&&(n="end_4_lose_jpg");var i=e.createBitmapByName(n);i.touchEnabled=!0,e.addChild(i),e.click_to_continue(),i.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){var t=new SoundBase("continue_mp3");t.play(),e.removeChild(i),e.B12Scene()},e)},e)},this)},e.prototype.B12Scene=function(){var t=this,e=this.createBitmapByName("q5_ground_jpg");this.addChild(e);var n=this.createBitmapByName("q5_jpg");this.run_mask(5),this.addChild(n),n.mask=this._shape;var i=this.createBitmapByName("answer_btn_png");i.x=100,i.y=535,this.addChild(i),i.touchEnabled=!0;var s=this.createBitmapByName("answer_btn_png");s.x=100,s.y=662,this.addChild(s),s.touchEnabled=!0;var a=this.createBitmapByName("answer_btn_png");a.x=100,a.y=790,a.height=140,this.addChild(a),a.touchEnabled=!0,i.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){t.removeChild(n),t.removeChild(i),t.removeChild(s),t.removeChild(a),t.step_five_answer(1)},this),s.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){t.removeChild(n),t.removeChild(i),t.removeChild(s),t.removeChild(a),t.step_five_answer(2)},this),a.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){t.removeChild(n),t.removeChild(i),t.removeChild(s),t.removeChild(a),t.step_five_answer(3)},this)},e.prototype.step_five_answer=function(t){var e=this;console.log("Đáp án "+t);var n=this.createBitmapByName("a5_jpg");switch(this.addChild(n),t){case 1:this.lose_sound(),egret.Tween.get(n).wait(1e3).call(function(){e.result=e.createBitmapByName("r5_1_jpg"),e.addChild(e.result),e.add_next_step_button(),e.next_step_action_five(1)});break;case 2:this.lose_sound(),egret.Tween.get(n).wait(1e3).call(function(){e.result=e.createBitmapByName("r5_2_jpg"),e.addChild(e.result),e.add_next_step_button(),e.next_step_action_five(2)});break;case 3:this.win_sound(),this.score=this.score+1,egret.Tween.get(n).wait(1e3).call(function(){e.result=e.createBitmapByName("r5_jpg"),e.addChild(e.result),e.add_next_step_button(),e.next_step_action_five(3)})}},e.prototype.next_step_action_five=function(t){var e=this;this.next_step_btn.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.click_sound.play(),e.next_step_btn.touchEnabled=!1,egret.Tween.get(e.next_step_btn).to({alpha:.4},100).to({alpha:1},100).wait(500).call(function(){e.removeChild(e.result),e.removeChild(e.next_step_btn);var t="end_5_jpg",n=e.createBitmapByName(t);n.touchEnabled=!0,e.addChild(n),e.click_to_continue(),n.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){var t=new SoundBase("continue_mp3");t.play(),e.removeChild(n),e.B13Scene()},e)},e)},this)},e.prototype.B13Scene=function(){var t=this,e=this.createBitmapByName("q6_ground_jpg");this.addChild(e);var n=this.createBitmapByName("q6_jpg");this.run_mask(6),this.addChild(n),n.mask=this._shape;var i=this.createBitmapByName("answer_btn_png");i.x=100,i.y=535,this.addChild(i),i.touchEnabled=!0;var s=this.createBitmapByName("answer_btn_png");s.x=100,s.y=662,this.addChild(s),s.touchEnabled=!0;var a=this.createBitmapByName("answer_btn_png");a.x=100,a.y=790,a.height=140,this.addChild(a),a.touchEnabled=!0,i.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){t.removeChild(n),t.removeChild(i),t.removeChild(s),t.removeChild(a),t.step_six_answer(1)},this),s.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){t.removeChild(n),t.removeChild(i),t.removeChild(s),t.removeChild(a),t.step_six_answer(2)},this),a.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){t.removeChild(n),t.removeChild(i),t.removeChild(s),t.removeChild(a),t.step_six_answer(3)},this)},e.prototype.step_six_answer=function(t){var e=this;console.log("Đáp án "+t);var n=this.createBitmapByName("a6_jpg");switch(this.addChild(n),t){case 1:this.lose_sound(),egret.Tween.get(n).wait(1e3).call(function(){e.result=e.createBitmapByName("r6_1_jpg"),e.addChild(e.result),e.add_next_step_button(),e.next_step_action_six(1)});break;case 2:this.win_sound(),egret.Tween.get(n).wait(1e3).call(function(){e.result=e.createBitmapByName("r6_jpg"),e.addChild(e.result),e.add_next_step_button(),e.next_step_action_six(2)});break;case 3:this.lose_sound(),this.score=this.score+1,egret.Tween.get(n).wait(1e3).call(function(){e.result=e.createBitmapByName("r6_2_jpg"),e.addChild(e.result),e.add_next_step_button(),e.next_step_action_six(3)})}},e.prototype.next_step_action_six=function(t){var e=this;this.next_step_btn.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.click_sound.play(),e.next_step_btn.touchEnabled=!1,egret.Tween.get(e.next_step_btn).to({alpha:.4},100).to({alpha:1},100).wait(500).call(function(){e.removeChild(e.result),e.removeChild(e.next_step_btn);var t="end_6_jpg",n=e.createBitmapByName(t);e.addChild(n),console.log("Đạt điểm số "+e.score+"/6"),e.sendPostRequest("fullname="+e.fullname.text+"&score="+e.score),e.rating()},e)},this)},e.prototype.rating=function(){var t=this,e=this.createBitmapByName("star_btn_png"),n=this.createBitmapByName("star_btn_png"),i=this.createBitmapByName("star_btn_png"),s=this.createBitmapByName("star_btn_png"),a=this.createBitmapByName("star_btn_png");e.x=86,n.x=187,i.x=280,s.x=375,a.x=470,e.y=n.y=i.y=s.y=a.y=509,e.touchEnabled=n.touchEnabled=i.touchEnabled=s.touchEnabled=a.touchEnabled=!0,this.addChild(e),this.addChild(n),this.addChild(i),this.addChild(s),this.addChild(a),e.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.touchEnabled=n.touchEnabled=i.touchEnabled=s.touchEnabled=a.touchEnabled=!1;var o=t.createBitmapByName("one_star_png");o.y=496,t.addChild(o),t.sendPostRequest("fullname="+t.fullname.text+"&rating=1"),egret.Tween.get(e).wait(3e3).call(function(){t.removeChild(e),t.removeChild(n),t.removeChild(i),t.removeChild(s),t.removeChild(a),t.createGameScene()})},this),n.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.touchEnabled=n.touchEnabled=i.touchEnabled=s.touchEnabled=a.touchEnabled=!1;var o=t.createBitmapByName("two_star_png");o.y=496,t.addChild(o),t.sendPostRequest("fullname="+t.fullname.text+"&rating=2"),egret.Tween.get(n).wait(3e3).call(function(){t.removeChild(e),t.removeChild(n),t.removeChild(i),t.removeChild(s),t.removeChild(a),t.createGameScene()})},this),i.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.touchEnabled=n.touchEnabled=i.touchEnabled=s.touchEnabled=a.touchEnabled=!1;var o=t.createBitmapByName("three_star_png");o.y=496,t.addChild(o),t.sendPostRequest("fullname="+t.fullname.text+"&rating=3"),egret.Tween.get(i).wait(3e3).call(function(){t.removeChild(e),t.removeChild(n),t.removeChild(i),t.removeChild(s),t.removeChild(a),t.createGameScene()})},this),s.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.touchEnabled=n.touchEnabled=i.touchEnabled=s.touchEnabled=a.touchEnabled=!1;var o=t.createBitmapByName("four_star_png");o.y=496,t.addChild(o),t.sendPostRequest("fullname="+t.fullname.text+"&rating=4"),egret.Tween.get(s).wait(3e3).call(function(){t.removeChild(e),t.removeChild(n),t.removeChild(i),t.removeChild(s),t.removeChild(a),t.createGameScene()})},this),a.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.touchEnabled=n.touchEnabled=i.touchEnabled=s.touchEnabled=a.touchEnabled=!1;var o=t.createBitmapByName("five_star_png");o.y=496,t.addChild(o),t.sendPostRequest("fullname="+t.fullname.text+"&rating=5"),egret.Tween.get(a).wait(3e3).call(function(){t.removeChild(e),t.removeChild(n),t.removeChild(i),t.removeChild(s),t.removeChild(a),t.createGameScene()})},this)},e.prototype.lose_sound=function(){var t=new SoundBase("Oops_mp3");t.play()},e.prototype.win_sound=function(){var t=new SoundBase("Yeah_mp3");t.play()},e.prototype.createBitmapByName=function(t){var e=new egret.Bitmap,n=RES.getRes(t);return e.texture=n,e},e.prototype.sendPostRequest=function(t){var e=new egret.HttpRequest;e.responseType=egret.HttpResponseType.TEXT,e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.open("https://hungpq.azfree.net/samsung_knox/server/app.php",egret.HttpMethod.POST),e.send(t),e.addEventListener(egret.Event.COMPLETE,this.onPostComplete,this),e.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onPostIOError,this),e.addEventListener(egret.ProgressEvent.PROGRESS,this.onPostProgress,this)},e.prototype.onPostComplete=function(t){var e=t.currentTarget;egret.log("post data : ",e.response)},e.prototype.onPostIOError=function(t){egret.log("post error : "+t)},e.prototype.onPostProgress=function(t){egret.log("post progress : "+Math.floor(100*t.bytesLoaded/t.bytesTotal)+"%")},e.prototype.click_to_continue=function(){var t=this,e=this.createBitmapByName("cont_text_png");this.addChild(e),e.y=this.stage.height-100;var n=function(){var i=egret.Tween.get(e);i.to({alpha:1},200),i.wait(500),i.to({alpha:0},200),i.call(n,t)};n()},e.prototype.run_mask=function(t){this.timer=new egret.Timer(1,0),this._shape=new egret.Shape,this.question=t,6==t&&(this.q_text=this.createBitmapByName("q6_text_png"),this.q_text.x=-640,this.q_text.y=367,this.addChild(this.q_text),egret.Tween.get(this.q_text).to({x:90},300),this._shape.x=67,this._shape.y=403),5==t&&(this.q_text=this.createBitmapByName("q5_text_png"),this.q_text.x=-640,this.q_text.y=391,this.addChild(this.q_text),egret.Tween.get(this.q_text).to({x:95},300),this._shape.x=67,this._shape.y=420),4==t&&(this.q_text=this.createBitmapByName("q4_text_png"),this.q_text.x=-640,this.q_text.y=366,this.addChild(this.q_text),egret.Tween.get(this.q_text).to({x:101},300),this._shape.x=69,this._shape.y=406),3==t&&(this.q_text=this.createBitmapByName("q3_text_png"),this.q_text.x=-640,this.q_text.y=379,this.addChild(this.q_text),egret.Tween.get(this.q_text).to({x:99},300),this._shape.x=69,this._shape.y=406),2==t&&(this.q_text=this.createBitmapByName("q2_text_png"),this.q_text.x=-640,this.q_text.y=380,this.addChild(this.q_text),egret.Tween.get(this.q_text).to({x:96},300),this._shape.x=69,this._shape.y=406),1==t&&(this.q_text=this.createBitmapByName("q1_text_png"),this.q_text.x=-640,this.q_text.y=375,this.addChild(this.q_text),egret.Tween.get(this.q_text).to({x:100},300),this._shape.x=69,this._shape.y=406),this.addChild(this._shape),this.angle=0,this.timer.addEventListener(egret.TimerEvent.TIMER,this.round_mask,this),this.timer.start()},e.prototype.round_mask=function(t){this.angle<400?(this._shape.graphics.beginFill(65535,1),this._shape.graphics.moveTo(0,0),this._shape.graphics.lineTo(30,0),this._shape.graphics.drawArc(0,0,30,0,this.angle*Math.PI/180,!1),this._shape.graphics.lineTo(0,0),this._shape.graphics.endFill(),this.angle=this.angle+20):(this.timer.removeEventListener(egret.TimerEvent.TIMER,this.round_mask,this),this.drawRect())},e.prototype.drawRect=function(){this.timer=new egret.Timer(1,0),this.rect_height=0,this.timer.addEventListener(egret.TimerEvent.TIMER,this.rect_mask,this),this.timer.start()},e.prototype.rect_mask=function(){var t=0;6==this.question&&(t=490),5==this.question&&(t=505),4==this.question&&(t=540),3==this.question&&(t=560),2==this.question&&(t=540),1==this.question&&(t=490),this.rect_height<t?(this._shape.graphics.beginFill(65535,1),this._shape.graphics.drawRect(0,-20,570,this.rect_height),this._shape.graphics.endFill(),this.rect_height=this.rect_height+10):(this.timer.removeEventListener(egret.TimerEvent.TIMER,this.rect_mask,this),this.round_mask_2())},e.prototype.round_mask_2=function(){this.timer=new egret.Timer(1,0),this.angle=0,5==this.question&&(this.q_text_2=this.createBitmapByName("q5_text2_png"),this.q_text_2.x=-640,this.q_text_2.y=905,this.addChild(this.q_text_2),egret.Tween.get(this.q_text_2).to({x:85},500)),4==this.question&&(this.q_text_2=this.createBitmapByName("q4_text2_png"),this.q_text_2.x=-640,this.q_text_2.y=920,this.addChild(this.q_text_2),egret.Tween.get(this.q_text_2).to({x:103},500)),3==this.question&&(this.q_text_2=this.createBitmapByName("q3_text2_png"),this.q_text_2.x=-640,this.q_text_2.y=956,this.addChild(this.q_text_2),egret.Tween.get(this.q_text_2).to({x:101},500)),2==this.question&&(this.q_text_2=this.createBitmapByName("q2_text2_png"),this.q_text_2.x=-640,this.q_text_2.y=924,this.addChild(this.q_text_2),egret.Tween.get(this.q_text_2).to({x:99},500)),1==this.question&&(this.q_text_2=this.createBitmapByName("q1_text2_png"),this.q_text_2.x=-640,this.q_text_2.y=864,this.addChild(this.q_text_2),egret.Tween.get(this.q_text_2).to({x:103},500)),this.timer.addEventListener(egret.TimerEvent.TIMER,this.round_mask_2_timer,this),this.timer.start()},e.prototype.round_mask_2_timer=function(){var t=0;1==this.question&&(t=500),2==this.question&&(t=552),3==this.question&&(t=562),4==this.question&&(t=542),5==this.question&&(t=510),6==this.question&&(t=488),this.angle<400?(this._shape.graphics.beginFill(65535,1),this._shape.graphics.moveTo(0,t),this._shape.graphics.lineTo(30,0),this._shape.graphics.drawArc(0,t,30,0,this.angle*Math.PI/180,!1),this._shape.graphics.lineTo(0,t),this._shape.graphics.endFill(),this.angle=this.angle+20):this.timer.removeEventListener(egret.TimerEvent.TIMER,this.round_mask_2_timer,this)},e}(egret.DisplayObjectContainer);__reflect(Main.prototype,"Main");var SoundBase=function(t){function e(e){var n=t.call(this)||this;return n._soundURL="start_sound",n._positon=0,n._loop=1,n._status=0,e&&(n._soundURL=e),n._sound=new egret.Sound,n._loadSound(),n}return __extends(e,t),e.prototype._loadSound=function(){RES.getRes(this._soundURL)?this._sound=RES.getRes(this._soundURL):(this._sound.once(egret.Event.COMPLETE,this.loadComplete,this),this._sound.once(egret.IOErrorEvent.IO_ERROR,this.onLoadErr,this),this._sound.load(this._soundURL))},e.prototype.loadComplete=function(t){this._status=3;var e="Load complete";egret.log(e),this._sound.removeEventListener(egret.IOErrorEvent.IO_ERROR,this.onLoadErr,this),this.dispatchEventWith(egret.Event.COMPLETE,!1,e)},e.prototype.onLoadErr=function(t){this._status=4;var e="Could not load sound at "+this._soundURL;egret.log(e),this._sound.removeEventListener(egret.Event.COMPLETE,this.loadComplete,this),this.dispatchEventWith(egret.IOErrorEvent.IO_ERROR,!1,e)},e.prototype.setUrl=function(t){this._soundURL=t,this._loadSound()},e.prototype.looped=function(t){console.log("looped"),this._soundChannel=null,this._positon=0,this._status=0;var e="looped";this._loop>=0?this.dispatchEventWith(egret.Event.SOUND_COMPLETE,!1,e):this.play()},e.prototype.getStatus=function(){return this._status},e.prototype.setVolume=function(t){console.log(this._status),1===this._status&&(this._soundChannel.volume=t/100)},e.prototype.showPosition=function(){return 1===this._status&&(this._positon=this._soundChannel.position),this._positon},e.prototype.play=function(){return 4===this._status?void this._loadSound():(this._status=1,this._soundChannel&&this._soundChannel.stop(),this._soundChannel=this._sound.play(this._positon,this._loop),this._soundChannel.once(egret.Event.SOUND_COMPLETE,this.looped,this),this._status)},e.prototype.setLoop=function(t){return void 0===t&&(t=1),this._loop=t,t},e.prototype.pause=function(){var t=this._status;return 1===t&&(this._positon=this._soundChannel.position,this._soundChannel.stop(),this._status=2),egret.log(this._positon),t},e.prototype.resume=function(){var t=this._status;return 2===t&&this.play(),egret.log(this._positon),t},e.prototype.stop=function(){this._status=0,this._positon=0,this._soundChannel.stop(),this._soundChannel=null},e}(egret.DisplayObjectContainer);__reflect(SoundBase.prototype,"SoundBase");